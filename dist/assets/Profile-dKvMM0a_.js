import{c as k,r as d,j as e,m as P,e as g,k as w,g as f,n as $,H as A,I as M,o as T,T as D,S as I,F as B,u as j}from"./index-BHqLgZ_Z.js";import{b as S,c as E,d as v,A as R,a as F,e as q,f as H,g as V}from"./alert-1xfbRv6q.js";import{M as K}from"./map-pin-DwSCb96t.js";import{C as O}from"./calendar-Cs1zI8U4.js";import{P as U}from"./phone-BxzqxeT1.js";import{M as Q}from"./mail-CSYszPLn.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=k("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=k("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function _({src:t,alt:a,width:n,height:i,className:l="",srcSet:p}){const[c,m]=d.useState(!1),[x,h]=d.useState(!1);return x?e.jsx("div",{className:`${l} bg-gray-200 flex items-center justify-center`,children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Image failed to load"})}):e.jsxs(e.Fragment,{children:[!c&&e.jsx(P,{}),e.jsx("img",{src:t,alt:a,width:n,height:i,loading:"lazy",srcSet:p,className:`${l} ${c?"opacity-100":"opacity-0"} transition-opacity duration-300`,onLoad:()=>m(!0),onError:()=>h(!0)})]})}async function G(t,a="recent"){try{return await v.get(`/artists/${t}/reviews?sort=${a}`)}catch(n){throw g.error("Failed to fetch reviews",n),n}}async function J(t){try{return await v.get(`/artists/${t}/reviews/stats`)}catch(a){throw g.error("Failed to fetch review stats",a),a}}async function X(t){try{return await v.post(`/artists/${t.artistId}/reviews`,{rating:t.rating,title:t.title,comment:t.comment})}catch(a){throw g.error("Failed to create review",a),a}}function Y(t,a="recent"){return S({queryKey:["reviews",t,a],queryFn:()=>G(t,a),staleTime:300*1e3})}function ee(t){return S({queryKey:["reviewStats",t],queryFn:()=>J(t),staleTime:600*1e3})}function se(){return E({mutationFn:t=>X(t),onError:t=>{g.error("Failed to create review",t)}})}function te({artistId:t}){const{data:a,isLoading:n,error:i}=Y(t),{data:l,isLoading:p}=ee(t),{mutate:c,isPending:m}=se(),[x,h]=d.useState(5),[u,r]=d.useState(""),[o,b]=d.useState(""),[C,L]=d.useState("recent"),z=s=>{if(s.preventDefault(),!u.trim()||!o.trim()){alert("Please fill in all fields");return}c({artistId:t,rating:x,title:u,comment:o},{onSuccess:()=>{r(""),b(""),h(5)}})},N=s=>e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(y=>e.jsx(f,{size:16,className:y<=s?"fill-yellow-400 text-yellow-400":"text-gray-300"},y))});return e.jsxs("div",{className:"space-y-8",children:[p?e.jsx(w,{}):l?e.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Customer Reviews"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-pink-500",children:l.averageRating.toFixed(1)}),e.jsx("div",{className:"flex justify-center mt-2",children:N(Math.round(l.averageRating))}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[l.totalReviews," reviews"]})]}),e.jsx("div",{className:"flex-1 space-y-2",children:[5,4,3,2,1].map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s,"â˜…"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-full bg-yellow-400 rounded-full",style:{width:`${l.totalReviews>0?(l.ratingDistribution[s]||0)/l.totalReviews*100:0}%`}})}),e.jsx("span",{className:"text-sm text-gray-600",children:l.ratingDistribution[s]||0})]},s))})]})]}):null,e.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[e.jsx("h4",{className:"text-xl font-bold mb-4",children:"Write a Review"}),i&&e.jsx(R,{className:"mb-4 border-red-200 bg-red-50",children:e.jsx(F,{className:"text-red-800",children:"Failed to load reviews."})}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>h(s),className:"focus:outline-none","aria-label":`Rate ${s} star${s>1?"s":""}`,children:e.jsx(f,{size:32,className:`cursor-pointer transition-colors ${s<=x?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-300"}`})},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"review-title",className:"block text-sm font-medium mb-2",children:"Review Title"}),e.jsx("input",{id:"review-title",type:"text",placeholder:"Summarize your experience",value:u,onChange:s=>r(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-pink-500",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"review-comment",className:"block text-sm font-medium mb-2",children:"Review Comment"}),e.jsx("textarea",{id:"review-comment",placeholder:"Share your experience with this artist...",value:o,onChange:s=>b(s.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-pink-500",maxLength:500})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-pink-500 text-white font-medium py-2 rounded-lg hover:bg-pink-600 disabled:opacity-50 transition-colors",children:m?"Submitting...":"Submit Review"})]})]}),e.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-xl font-bold",children:"All Reviews"}),e.jsxs("select",{value:C,onChange:s=>L(s.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm","aria-label":"Sort reviews",children:[e.jsx("option",{value:"recent",children:"Most Recent"}),e.jsx("option",{value:"helpful",children:"Most Helpful"}),e.jsx("option",{value:"rating",children:"Highest Rated"})]})]}),n?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(w,{},s))}):a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N(s.rating),s.verified&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Verified"})]}),e.jsx("h5",{className:"font-semibold text-gray-900 mt-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s.comment}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.userName}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsx("button",{title:"Delete review",className:"text-gray-400 hover:text-red-500","aria-label":"Delete review",children:e.jsx(Z,{size:18})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:e.jsxs("button",{className:"flex items-center gap-1 text-sm text-gray-600 hover:text-pink-500",children:[e.jsx(W,{size:16}),e.jsxs("span",{children:["Helpful (",s.helpful,")"]})]})})]},s.id))}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"No reviews yet. Be the first to review!"})]})]})}const oe=()=>{const{id:t="1"}=$(),[a,n]=d.useState(""),{data:i,isLoading:l,error:p}=q(t),{data:c=[],isLoading:m}=H(t),{mutate:x}=V(),h=["https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400&h=400&fit=crop","https://images.unsplash.com/photo-1522337660859-02fbefca4702?w=400&h=400&fit=crop","https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?w=400&h=400&fit=crop","https://images.unsplash.com/photo-1595475038607-33cf50fa5c8c?w=400&h=400&fit=crop","https://images.unsplash.com/photo-1560869713-571ebd71be4e?w=400&h=400&fit=crop","https://images.unsplash.com/photo-1512496015851-a90fb38ba796?w=400&h=400&fit=crop"],u=()=>{if(!a){j.error("Please select a service");return}x({artistId:t,serviceId:a,date:new Date().toISOString(),totalPrice:1e3},{onSuccess:()=>{j.success("Booking request sent! Artist will confirm shortly."),n("")},onError:()=>{j.error("Failed to create booking. Please try again.")}})};return e.jsxs("div",{className:"font-['Poppins'] bg-gradient-to-br from-pink-50 to-purple-50 min-h-screen",children:[e.jsx(A,{}),e.jsx("section",{className:"pt-32 pb-12 px-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("div",{className:"glass-panel p-8 rounded-3xl mb-8",children:p?e.jsx(R,{className:"border-red-200 bg-red-50",children:e.jsx(F,{className:"text-red-800",children:"Failed to load artist profile."})}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/3 animate-pulse"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 animate-pulse"})]}):i?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-white shadow-lg bg-gradient-to-tr from-indigo-500 to-purple-600"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:i.name}),e.jsxs("p",{className:"text-pink-500 text-lg mb-3 capitalize",children:[i.specialty," Artist"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(K,{size:18,className:"mr-1"}),e.jsx("span",{children:i.location})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"text-yellow-400 fill-current mr-1",size:18}),e.jsx("span",{className:"font-semibold",children:i.rating}),e.jsxs("span",{className:"text-gray-600 ml-1",children:["(",i.reviewCount," reviews)"]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:i.bio}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:`https://instagram.com/${i.instagram}`,title:"Instagram",className:"text-pink-500 hover:text-pink-600",children:e.jsx(M,{size:24})}),e.jsx("a",{href:"#",title:"Facebook",className:"text-pink-500 hover:text-pink-600",children:e.jsx(T,{size:24})}),e.jsx("a",{href:"#",title:"Twitter",className:"text-pink-500 hover:text-pink-600",children:e.jsx(D,{size:24})})]})]})]})}):null}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Services & Pricing"}),m?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((r,o)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},o))}):c.length>0?e.jsx("div",{className:"space-y-4",children:c.map(r=>e.jsx("div",{className:`service-item p-4 cursor-pointer border-2 rounded-lg transition-all ${a===r.id?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-300"}`,onClick:()=>n(r.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.name}),e.jsx("p",{className:"text-gray-600 text-sm",children:r.duration})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-pink-500",children:[r.currency,r.price]})})]})},r.id))}):e.jsx("p",{className:"text-gray-600",children:"No services available"})]}),e.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Portfolio"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map((r,o)=>e.jsx(_,{src:r,alt:`Portfolio ${o+1}`,className:"w-full h-40 object-cover rounded-xl"},o))})]}),e.jsx(te,{artistId:t})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-panel p-6 rounded-3xl sticky top-24",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Book Appointment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"select-service",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Service"}),e.jsxs("select",{id:"select-service",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:border-pink-500",value:a,onChange:r=>n(r.target.value),"aria-label":"Select service",children:[e.jsx("option",{value:"",children:"Choose a service..."}),c.map(r=>e.jsxs("option",{value:r.id,children:[r.name," - ",r.price]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),e.jsx("input",{id:"preferred-date",type:"date",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:border-pink-500","aria-label":"Preferred date"})]}),e.jsxs("button",{onClick:u,className:"w-full bg-pink-500 hover:bg-pink-600 text-white py-3 rounded-full font-medium transition-all flex items-center justify-center",children:[e.jsx(O,{className:"mr-2",size:20}),"Request Booking"]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[e.jsxs("a",{href:"tel:+27123456789",className:"flex items-center text-gray-600 hover:text-pink-500 transition",children:[e.jsx(U,{size:18,className:"mr-2"}),"+27 11 234 5678"]}),e.jsxs("a",{href:"mailto:thandi@example.com",className:"flex items-center text-gray-600 hover:text-pink-500 transition",children:[e.jsx(Q,{size:18,className:"mr-2"}),"thandi@example.com"]})]})]})]})})]})]})}),e.jsx(I,{}),e.jsx(B,{})]})};export{oe as default};
